(()=>{"use strict";const e=window.wp.blocks,a=window.React,t=window.wp.i18n,l=window.wp.blockEditor,o=window.wp.components,n=window.wp.element,c=JSON.parse('{"UU":"mon-theme-aca/contact-offices"}');(0,e.registerBlockType)(c.UU,{edit:function({attributes:e,setAttributes:c}){const{title:m,subtitle:i,offices:r,backgroundColor:s,titleColor:d,subtitleColor:h,cardBgColor:u,mainOfficeColor:f,regularOfficeColor:C}=e,[E,p]=(0,n.useState)(0),[N,_]=(0,n.useState)({id:Date.now(),name:"",city:"",country:"",address:"",postalCode:"",phone:"",email:"",hours:"",isMain:!1}),g=(0,l.useBlockProps)({className:"contact-offices-block",style:{backgroundColor:s}}),v=(e,a,t)=>{const l=[...r];l[e]={...l[e],[a]:t},"isMain"===a&&!0===t&&l.forEach(((a,t)=>{t!==e&&a.isMain&&(l[t]={...a,isMain:!1})})),c({offices:l})};return(0,a.createElement)(n.Fragment,null,(0,a.createElement)(l.InspectorControls,null,(0,a.createElement)(o.PanelBody,{title:(0,t.__)("Paramètres généraux","mon-theme-aca")},(0,a.createElement)(o.TextControl,{label:(0,t.__)("Titre","mon-theme-aca"),value:m,onChange:e=>c({title:e})}),(0,a.createElement)(o.TextControl,{label:(0,t.__)("Sous-titre","mon-theme-aca"),value:i,onChange:e=>c({subtitle:e})})),(0,a.createElement)(o.PanelBody,{title:(0,t.__)("Bureaux","mon-theme-aca")},(0,a.createElement)("div",{className:"offices-editor"},(0,a.createElement)("div",{className:"offices-list"},(0,a.createElement)("p",{className:"offices-title"},(0,t.__)("Bureaux","mon-theme-aca")),r.length>0?(0,a.createElement)("div",{className:"offices-tabs"},r.map(((e,l)=>(0,a.createElement)("button",{key:l,className:`office-tab ${l===E?"active":""} ${e.isMain?"main":""}`,onClick:()=>p(l)},e.name||(0,t.__)("Sans nom","mon-theme-aca"))))):(0,a.createElement)("p",{className:"no-offices"},(0,t.__)("Aucun bureau ajouté","mon-theme-aca")),r.length>0&&(0,a.createElement)("div",{className:"office-editor"},(0,a.createElement)(o.TextControl,{label:(0,t.__)("Nom","mon-theme-aca"),value:r[E].name,onChange:e=>v(E,"name",e)}),(0,a.createElement)("div",{className:"office-location"},(0,a.createElement)(o.TextControl,{label:(0,t.__)("Ville","mon-theme-aca"),value:r[E].city,onChange:e=>v(E,"city",e)}),(0,a.createElement)(o.TextControl,{label:(0,t.__)("Pays","mon-theme-aca"),value:r[E].country,onChange:e=>v(E,"country",e)})),(0,a.createElement)(o.TextControl,{label:(0,t.__)("Adresse","mon-theme-aca"),value:r[E].address,onChange:e=>v(E,"address",e)}),(0,a.createElement)(o.TextControl,{label:(0,t.__)("Code postal","mon-theme-aca"),value:r[E].postalCode,onChange:e=>v(E,"postalCode",e)}),(0,a.createElement)(o.TextControl,{label:(0,t.__)("Téléphone","mon-theme-aca"),value:r[E].phone,onChange:e=>v(E,"phone",e)}),(0,a.createElement)(o.TextControl,{label:(0,t.__)("Email","mon-theme-aca"),value:r[E].email,onChange:e=>v(E,"email",e)}),(0,a.createElement)(o.TextControl,{label:(0,t.__)("Horaires","mon-theme-aca"),value:r[E].hours,onChange:e=>v(E,"hours",e)}),(0,a.createElement)(o.ToggleControl,{label:(0,t.__)("Bureau principal","mon-theme-aca"),checked:r[E].isMain,onChange:e=>v(E,"isMain",e)}),(0,a.createElement)(o.Button,{isDestructive:!0,onClick:()=>(e=>{const a=[...r],t=a[e];a.splice(e,1),t.isMain&&a.length>0&&(a[0]={...a[0],isMain:!0}),c({offices:a}),E>=a.length&&p(Math.max(0,a.length-1))})(E)},(0,t.__)("Supprimer ce bureau","mon-theme-aca")))),(0,a.createElement)("div",{className:"add-office"},(0,a.createElement)("p",{className:"add-office-title"},(0,t.__)("Ajouter un bureau","mon-theme-aca")),(0,a.createElement)(o.TextControl,{placeholder:(0,t.__)("Nom du bureau","mon-theme-aca"),value:N.name,onChange:e=>_({...N,name:e})}),(0,a.createElement)("div",{className:"office-location"},(0,a.createElement)(o.TextControl,{placeholder:(0,t.__)("Ville","mon-theme-aca"),value:N.city,onChange:e=>_({...N,city:e})}),(0,a.createElement)(o.TextControl,{placeholder:(0,t.__)("Pays","mon-theme-aca"),value:N.country,onChange:e=>_({...N,country:e})})),(0,a.createElement)(o.TextControl,{placeholder:(0,t.__)("Adresse","mon-theme-aca"),value:N.address,onChange:e=>_({...N,address:e})}),(0,a.createElement)(o.TextControl,{placeholder:(0,t.__)("Code postal","mon-theme-aca"),value:N.postalCode,onChange:e=>_({...N,postalCode:e})}),(0,a.createElement)(o.TextControl,{placeholder:(0,t.__)("Téléphone","mon-theme-aca"),value:N.phone,onChange:e=>_({...N,phone:e})}),(0,a.createElement)(o.TextControl,{placeholder:(0,t.__)("Email","mon-theme-aca"),value:N.email,onChange:e=>_({...N,email:e})}),(0,a.createElement)(o.TextControl,{placeholder:(0,t.__)("Horaires","mon-theme-aca"),value:N.hours,onChange:e=>_({...N,hours:e})}),(0,a.createElement)(o.ToggleControl,{label:(0,t.__)("Bureau principal","mon-theme-aca"),checked:N.isMain,onChange:e=>_({...N,isMain:e})}),(0,a.createElement)(o.Button,{isPrimary:!0,onClick:()=>{if(""!==N.name.trim()&&""!==N.city.trim()){const e=N.isMain||0===r.length;let a=[...r];e&&(a=a.map((e=>({...e,isMain:!1})))),c({offices:[...a,{...N,id:Date.now(),isMain:e}]}),_({id:Date.now()+1,name:"",city:"",country:"",address:"",postalCode:"",phone:"",email:"",hours:"",isMain:!1})}},disabled:!N.name.trim()||!N.city.trim()},(0,t.__)("Ajouter","mon-theme-aca"))))),(0,a.createElement)(o.PanelBody,{title:(0,t.__)("Couleurs","mon-theme-aca")},(0,a.createElement)("div",{className:"color-option"},(0,a.createElement)("label",null,(0,t.__)("Couleur de fond","mon-theme-aca")),(0,a.createElement)(o.ColorPicker,{color:s,onChange:e=>c({backgroundColor:e}),enableAlpha:!0})),(0,a.createElement)("div",{className:"color-option"},(0,a.createElement)("label",null,(0,t.__)("Couleur du titre","mon-theme-aca")),(0,a.createElement)(o.ColorPicker,{color:d,onChange:e=>c({titleColor:e}),enableAlpha:!0})),(0,a.createElement)("div",{className:"color-option"},(0,a.createElement)("label",null,(0,t.__)("Couleur du sous-titre","mon-theme-aca")),(0,a.createElement)(o.ColorPicker,{color:h,onChange:e=>c({subtitleColor:e}),enableAlpha:!0})),(0,a.createElement)("div",{className:"color-option"},(0,a.createElement)("label",null,(0,t.__)("Couleur de fond des cartes","mon-theme-aca")),(0,a.createElement)(o.ColorPicker,{color:u,onChange:e=>c({cardBgColor:e}),enableAlpha:!0})),(0,a.createElement)("div",{className:"color-option"},(0,a.createElement)("label",null,(0,t.__)("Couleur du bureau principal","mon-theme-aca")),(0,a.createElement)(o.ColorPicker,{color:f,onChange:e=>c({mainOfficeColor:e}),enableAlpha:!0})),(0,a.createElement)("div",{className:"color-option"},(0,a.createElement)("label",null,(0,t.__)("Couleur des bureaux réguliers","mon-theme-aca")),(0,a.createElement)(o.ColorPicker,{color:C,onChange:e=>c({regularOfficeColor:e}),enableAlpha:!0})))),(0,a.createElement)("div",{...g},(0,a.createElement)("div",{className:"contact-offices-container"},(0,a.createElement)("div",{className:"contact-offices-header"},(0,a.createElement)(l.RichText,{tagName:"h2",className:"contact-offices-title",style:{color:d},value:m,onChange:e=>c({title:e}),placeholder:(0,t.__)("Titre...","mon-theme-aca")}),(0,a.createElement)(l.RichText,{tagName:"p",className:"contact-offices-subtitle",style:{color:h},value:i,onChange:e=>c({subtitle:e}),placeholder:(0,t.__)("Sous-titre...","mon-theme-aca")})),(0,a.createElement)("div",{className:"offices-grid"},r.map(((e,o)=>(0,a.createElement)("div",{key:e.id,className:"office-card",style:{backgroundColor:u,borderTopColor:e.isMain?f:C}},(0,a.createElement)("div",{className:"office-header"},(0,a.createElement)("div",{className:"office-title"},(0,a.createElement)(l.RichText,{tagName:"h3",className:"office-name",value:e.name,onChange:e=>v(o,"name",e),placeholder:(0,t.__)("Nom du bureau...","mon-theme-aca")}),(0,a.createElement)(l.RichText,{tagName:"p",className:"office-location",value:`${e.city}, ${e.country}`,onChange:e=>{const a=e.split(",");a.length>=2?(v(o,"city",a[0].trim()),v(o,"country",a.slice(1).join(",").trim())):v(o,"city",e)},placeholder:(0,t.__)("Ville, Pays...","mon-theme-aca")})),e.isMain&&(0,a.createElement)("span",{className:"main-office-badge",style:{backgroundColor:f}},(0,t.__)("Siège","mon-theme-aca"))),(0,a.createElement)("div",{className:"office-details"},(0,a.createElement)("div",{className:"office-detail"},(0,a.createElement)("span",{className:"detail-icon address-icon"}),(0,a.createElement)("div",{className:"detail-content"},(0,a.createElement)(l.RichText,{tagName:"p",className:"detail-text",value:e.address,onChange:e=>v(o,"address",e),placeholder:(0,t.__)("Adresse...","mon-theme-aca")}),(0,a.createElement)(l.RichText,{tagName:"p",className:"detail-subtext",value:e.postalCode,onChange:e=>v(o,"postalCode",e),placeholder:(0,t.__)("Code postal...","mon-theme-aca")}))),(0,a.createElement)("div",{className:"office-detail"},(0,a.createElement)("span",{className:"detail-icon phone-icon"}),(0,a.createElement)(l.RichText,{tagName:"a",className:"detail-link",value:e.phone,onChange:e=>v(o,"phone",e),placeholder:(0,t.__)("Téléphone...","mon-theme-aca")})),(0,a.createElement)("div",{className:"office-detail"},(0,a.createElement)("span",{className:"detail-icon email-icon"}),(0,a.createElement)(l.RichText,{tagName:"a",className:"detail-link",value:e.email,onChange:e=>v(o,"email",e),placeholder:(0,t.__)("Email...","mon-theme-aca")})),(0,a.createElement)("div",{className:"office-detail"},(0,a.createElement)("span",{className:"detail-icon hours-icon"}),(0,a.createElement)(l.RichText,{tagName:"span",className:"detail-text",value:e.hours,onChange:e=>v(o,"hours",e),placeholder:(0,t.__)("Horaires...","mon-theme-aca")}))))))))))},save:function({attributes:e}){const{title:t,subtitle:o,offices:n,backgroundColor:c,titleColor:m,subtitleColor:i,cardBgColor:r,mainOfficeColor:s,regularOfficeColor:d}=e,h=l.useBlockProps.save({className:"contact-offices-block",style:{backgroundColor:c}});return(0,a.createElement)("section",{...h},(0,a.createElement)("div",{className:"contact-offices-container"},(0,a.createElement)("div",{className:"contact-offices-header"},(0,a.createElement)(l.RichText.Content,{tagName:"h2",className:"contact-offices-title",style:{color:m},value:t}),(0,a.createElement)(l.RichText.Content,{tagName:"p",className:"contact-offices-subtitle",style:{color:i},value:o})),(0,a.createElement)("div",{className:"offices-grid"},n.map((e=>(0,a.createElement)("div",{key:e.id,className:"office-card",style:{backgroundColor:r,borderTopColor:e.isMain?s:d}},(0,a.createElement)("div",{className:"office-header"},(0,a.createElement)("div",{className:"office-title"},(0,a.createElement)(l.RichText.Content,{tagName:"h3",className:"office-name",value:e.name}),(0,a.createElement)(l.RichText.Content,{tagName:"p",className:"office-location",value:`${e.city}, ${e.country}`})),e.isMain&&(0,a.createElement)("span",{className:"main-office-badge",style:{backgroundColor:s}},"Siège")),(0,a.createElement)("div",{className:"office-details"},(0,a.createElement)("div",{className:"office-detail"},(0,a.createElement)("span",{className:"detail-icon address-icon"}),(0,a.createElement)("div",{className:"detail-content"},(0,a.createElement)(l.RichText.Content,{tagName:"p",className:"detail-text",value:e.address}),(0,a.createElement)(l.RichText.Content,{tagName:"p",className:"detail-subtext",value:e.postalCode}))),(0,a.createElement)("div",{className:"office-detail"},(0,a.createElement)("span",{className:"detail-icon phone-icon"}),(0,a.createElement)("a",{href:`tel:${e.phone.replace(/\s+/g,"")}`,className:"detail-link"},e.phone)),(0,a.createElement)("div",{className:"office-detail"},(0,a.createElement)("span",{className:"detail-icon email-icon"}),(0,a.createElement)("a",{href:`mailto:${e.email}`,className:"detail-link"},e.email)),(0,a.createElement)("div",{className:"office-detail"},(0,a.createElement)("span",{className:"detail-icon hours-icon"}),(0,a.createElement)("span",{className:"detail-text"},e.hours)))))))))}})})();